# 테스트 시나리오 생성기 v2

## 📋 프로젝트 개요

금융권(보험) 엔터프라이즈 시스템의 화면 설계서 이미지를 분석하여 테스트 시나리오를 자동으로 생성하고 Excel로 내보내는 QA 자동화 도구입니다.

## ✨ 주요 기능

- **🖼️ 이미지 분석**: 화면 설계서 이미지(PNG, JPG)를 업로드하여 AI가 자동 분석
- **🤖 AI 기반 시나리오 생성**: Google Gemini 1.5 Pro API를 활용한 테스트 케이스 자동 생성
- **📊 실시간 미리보기**: 업로드한 이미지와 생성된 시나리오를 나란히 비교
- **📥 Excel 내보내기**: 실무 서식에 맞는 포맷팅된 Excel 파일 다운로드
- **🎯 Happy/Exception Path**: 정상 케이스와 예외 케이스를 5:5 비율로 자동 생성

## 🚀 시작하기

### 1. 필수 요구사항

- Python 3.8 이상
- Google AI Studio API 키 ([발급 받기](https://makersuite.google.com/app/apikey))

### 2. 설치 방법

```bash
# 저장소 클론 또는 디렉토리로 이동
cd "테스트 시나리오생성기2"

# 의존성 설치
pip install -r requirements.txt
```

### 3. 실행 방법

```bash
# Streamlit 앱 실행
streamlit run app.py
```

브라우저가 자동으로 열리며 `http://localhost:8501`에서 애플리케이션을 사용할 수 있습니다.

## 📖 사용 방법

1. **API 키 입력**
   - 왼쪽 사이드바에서 Google Gemini API 키를 입력합니다
   - 모델을 선택합니다 (Gemini 1.5 Pro 권장)

2. **이미지 업로드**
   - 화면 설계서 이미지를 업로드합니다 (PNG, JPG 형식)
   - UI와 Description이 포함된 이미지가 가장 좋습니다

3. **시나리오 생성**
   - "🚀 시나리오 생성 시작" 버튼을 클릭합니다
   - AI가 이미지를 분석하여 테스트 케이스를 생성합니다

4. **결과 확인 및 다운로드**
   - 생성된 시나리오를 테이블 형태로 확인합니다
   - "📥 Excel 파일 다운로드" 버튼으로 파일을 저장합니다

## 📂 프로젝트 구조

```
테스트 시나리오생성기2/
├── app.py              # 메인 Streamlit 애플리케이션
├── requirements.txt    # Python 의존성 목록
└── README.md          # 프로젝트 문서 (이 파일)
```

## 🎨 생성되는 테스트 시나리오 형식

| 화면ID | 대분류 | 테스트조건 | 입력값 | 수행동작 | 기대결과 | 중요도 |
|--------|--------|-----------|--------|----------|----------|--------|
| SCR001 | UI | 필수값 입력 | 계약자명: 홍길동 | 저장 버튼 클릭 | 정상 저장 완료 | 상 |
| SCR002 | 기능 | 필수값 누락 | 계약자명: 공백 | 저장 버튼 클릭 | 검증 오류 메시지 | 상 |

## 🔧 기술 스택

- **Frontend/Backend**: Streamlit
- **AI/ML**: Google Gemini 1.5 Pro API
- **Data Processing**: Pandas, Pydantic
- **File Handling**: openpyxl, Pillow

## ⚙️ 주요 설정

### LLM System Prompt

AI는 다음 원칙에 따라 테스트 시나리오를 생성합니다:

- **역할**: 15년차 QA 리더
- **생성 비율**: Happy Path 50% + Exception Path 50%
- **우선순위**: 화면 Description 텍스트 기반
- **정확성**: 버튼명/라벨명 이미지 텍스트 그대로 인용

### 예외 처리

- API 호출 실패 시 자동 재시도 (최대 1회)
- JSON 파싱 오류 시 원본 텍스트 표시
- 사용자 친화적인 에러 메시지 제공

## 💡 팁

- **이미지 품질**: 선명하고 텍스트가 잘 보이는 이미지를 사용하세요
- **Description 포함**: 화면 설명이 포함된 이미지가 더 정확한 결과를 생성합니다
- **모델 선택**: 
  - `gemini-1.5-pro`: 정확도 우선 (권장)
  - `gemini-1.5-flash`: 속도 우선

## 🐛 문제 해결

### API 키 오류
```
❌ API 키를 확인해주세요!
```
→ Google AI Studio에서 발급받은 유효한 API 키를 입력하세요

### 이미지 업로드 오류
```
❌ 이미지를 업로드해주세요!
```
→ PNG 또는 JPG 형식의 이미지 파일을 업로드하세요

### JSON 파싱 오류
→ LLM이 반환한 원본 텍스트가 표시됩니다. 이미지를 변경하거나 다시 시도하세요

## 📝 라이선스

이 프로젝트는 내부 업무용 도구입니다.

## 👨‍💻 개발자

금융권 엔터프라이즈 시스템 QA 자동화 팀

---

**Version**: 2.0  
**Last Updated**: 2026-01-19
