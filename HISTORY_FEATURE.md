# 히스토리 관리 기능 추가 - 업데이트 가이드

## 새로 추가된 기능

### 1. 자동 히스토리 저장
- 테스트 시나리오 생성 시 자동으로 `history.csv` 파일에 저장됩니다
- 저장 정보: 생성 시간, 사용 모델, 이미지명, 시나리오 개수, 시나리오 데이터(JSON)

### 2. 히스토리 탭
- 새로운 탭 구조로 "시나리오 생성"과 "히스토리" 분리
- 히스토리 탭에서 이전 결과를 확인하고 관리

### 3. 히스토리 조회 및 불러오기
- 확장 가능한 카드 형태로 히스토리 표시
- 각 히스토리에서 **불러오기** 버튼 클릭 시 해당 시나리오를 다시 로드
- 시나리오 미리보기 (처음 3개) 제공

### 4. 히스토리 삭제
- 각 히스토리 항목에서 **삭제** 버튼으로 개별 삭제 가능

## 사용 방법

1. **시나리오 생성 탭**: 기존과 동일하게 이미지 업로드 → 생성
2. **히스토리 탭**: 
   - 이전 결과 조회
   - 불러오기 클릭하여 재사용
   - 필요 없는 히스토리 삭제

## 주요 변경 사항

### 추가된 함수들
- `get_history_file_path()`: history.csv 파일 경로 관리
- `load_history()`: CSV에서 히스토리 로드
- `save_to_history()`: 새 시나리오를 히스토리에 저장
- `delete_history_entry()`: 특정 히스토리 삭제

### UI 변경사항
- 탭 구조 도입 (`st.tabs()`)
- 히스토리 탭에 expandable UI (`st.expander()`)
- 인터랙티브 버튼 (불러오기, 삭제)

## 파일 구조
```
history.csv
├── Timestamp        # 생성 시간
├── Model           # 사용한 모델명
├── ImageName       # 이미지 파일명
├── ScenarioCount   # 시나리오 개수
└── Scenarios       # JSON 형식의 시나리오 데이터
```

## 호환성
- 기존 기능은 모두 유지
- 이전 버전과 동일한 방식으로 사용 가능
- 히스토리 기능은 선택적 사용
